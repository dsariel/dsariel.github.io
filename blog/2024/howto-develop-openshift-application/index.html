<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>HOWTO develop an OpenShift application | David Sariel</title> <meta name="author" content="David Sariel"> <meta name="description" content="OpenShift container runtime poses restrictions, and simple application containerization will not work in the vast majority of cases. In this post, steps are described to download CRC locally, containerize an application, apply necessary adjustments to overcome the restrictions, and push the resulting tested image to a registry, from which a production OpenShift instance will pull it."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://dsariel.github.io/blog/2024/howto-develop-openshift-application/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?6185d15ea1982787ad7f435576553d64"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">David </span>Sariel</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">HOWTO develop an OpenShift application</h1> <p class="post-meta">November 11, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/openshift"> <i class="fa-solid fa-hashtag fa-sm"></i> OpenShift</a>   <a href="/blog/tag/crc"> <i class="fa-solid fa-hashtag fa-sm"></i> crc</a>   <a href="/blog/tag/application"> <i class="fa-solid fa-hashtag fa-sm"></i> application</a>   <a href="/blog/tag/development"> <i class="fa-solid fa-hashtag fa-sm"></i> development</a>   <a href="/blog/tag/codereadycontainers"> <i class="fa-solid fa-hashtag fa-sm"></i> CodeReadyContainers</a>     ·   <a href="/blog/category/sample-posts"> <i class="fa-solid fa-tag fa-sm"></i> sample-posts</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="how-to-install-red-hat-openshift-local-on-your-laptop">How to install Red Hat OpenShift Local on your laptop</h1> <p>Since OpenShift’s container runtime poses constraints, one can’t simply create a <code class="language-plaintext highlighter-rouge">Containerfile</code> (or <code class="language-plaintext highlighter-rouge">Dockerfile</code>) and test a containerized application with Podman (or Docker), expecting it to be flawlessly deployed and work on OpenShift just because it worked on the Podman (or Docker) runtime.</p> <p>One possible approach (subject to limitations described below) is installing an all-in-one version of OpenShift and proceeding with the deployment, testing, and debugging cycles on the local machine.</p> <p>Using a local instance of OpenShift can save a considerable amount of time by eliminating the step of pushing large container images to a container registry. This allows you to create a container image locally and perform an OpenShift application deployment directly from that local image. However, this all-in-one version of OpenShift has limitations compared to a full-fledged OpenShift deployment across multiple nodes with dedicated hardware. For more details, see the <a href="https://docs.redhat.com/en/documentation/red_hat_codeready_containers/1.0/html/getting_started_guide/getting-started-with-codeready-containers_gsg#differences_with_a_production_openshift_install" rel="external nofollow noopener" target="_blank">Red Hat CodeReady Containers documentation</a>.</p> <p>If your application requires features that are not supported by the all-in-one version, this method may not work for those applications (or may not test all the features of the application). Nevertheless, it can be useful for an initial kickstart and a subset of features.</p> <p>With that said, follow the steps to deploy CRC locally as outlined in the <a href="https://docs.redhat.com/en/documentation/red_hat_openshift_local/2.43/html/getting_started_guide/index" rel="external nofollow noopener" target="_blank">Red Hat OpenShift Local documentation</a>.</p> <h1 id="understanding-security-context-constraints-sccs-in-openshift">Understanding Security Context Constraints (SCCs) in OpenShift</h1> <p>In OpenShift, Security Context Constraints (SCCs) play a crucial role in controlling the permissions of containers and maintaining the security of the cluster. To grasp the significance of SCCs, it’s essential to understand how containers interact with protected Linux functions.</p> <h2 id="what-is-a-security-context-constraint">What Is a Security Context Constraint?</h2> <p>When a container runs a process, it inherently restricts that process from accessing certain privileged Linux functionalities. These limitations include actions such as:</p> <ul> <li>Accessing shared file systems</li> <li>Running as a privileged container or as root</li> <li>Executing specific Linux commands, such as <code class="language-plaintext highlighter-rouge">kill</code> </li> </ul> <p>These restrictions are in place to maintain container isolation. If processes within containers had unrestricted access, they could interfere with other processes and potentially compromise the isolation and security of the system.</p> <p>However, there are situations where applications require access to some of these protected functions. This is where Security Contexts and Security Context Constraints come into play.</p> <h2 id="how-security-contexts-work">How Security Contexts Work</h2> <p>A Security Context defines the security privileges and access controls applied to a pod or container. When an application needs access to certain protected Linux functions, the pod running the container must be configured with a security context that specifies the required access.</p> <p>Key components of the configuration include:</p> <ul> <li>The pod’s security context which details the access permissions needed.</li> <li>A service account associated with the pod that authorizes these permissions.</li> </ul> <h2 id="the-scc-authorization-process">The SCC Authorization Process</h2> <p>The process for granting these permissions involves several steps:</p> <ol> <li> <strong>Developer creates an application</strong>: The developer builds an application that requires access to certain protected functions.</li> <li> <strong>Deployer writes a deployment manifest</strong>: This manifest specifies the security context and the service account needed for the application.</li> <li> <strong>Association with an SCC</strong>: The deployment is linked to an SCC, either predefined by OpenShift or custom-created by the cluster administrator.</li> <li> <strong>Cluster administrator control</strong>: The SCC is created and managed by the cluster administrator, who has full control over which pods can access which functionalities.</li> </ol> <h2 id="how-pods-are-authorized">How Pods Are Authorized</h2> <p>When the deployment manifest is applied:</p> <ul> <li>The pod specifies the service account to be used.</li> <li>The service account is associated with an SCC, directly or through RBAC (Role-Based Access Control).</li> <li>Admission control checks if the pod’s security context aligns with the permissions defined in the SCC. If the request is valid, the pod is allowed to run with the specified access; otherwise, it is denied.</li> </ul> <h2 id="example-pod-manifest-and-deployment">Example: Pod Manifest and Deployment</h2> <p>In a typical deployment manifest, security contexts can be set at two levels:</p> <ul> <li> <strong>Container-level security context</strong>: Specifies access permissions for an individual container.</li> <li> <strong>Pod-level security context</strong>: Applies permissions to all containers within the pod.</li> </ul> <p>The pod manifest also includes the service account name used to authorize the specified access.</p> <h2 id="structure-of-security-context-constraints">Structure of Security Context Constraints</h2> <p>SCCs can either be predefined or custom-made by cluster administrators. Here’s a comparison between a restricted SCC and a custom SCC:</p> <ul> <li> <strong>Restricted SCC</strong>: This built-in SCC in OpenShift enforces strict limitations. It drops most capabilities and restricts user and group permissions, ensuring minimal access beyond default settings.</li> <li> <strong>Custom SCC</strong>: Administrators can create tailored SCCs that provide specific permissions, such as allowing a user ID range (e.g., 1000-2000) or granting additional capabilities.</li> </ul> <h2 id="conclusion">Conclusion</h2> <p>SCCs are essential for maintaining a secure and controlled environment in OpenShift. While containers by default limit access to protect system integrity, SCCs provide the flexibility needed when applications require elevated permissions. This balance ensures that cluster administrators can grant necessary permissions while maintaining overall security.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/displaying-external-posts-on-your-al-folio-blog/">Displaying External Posts on Your al-folio Blog</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 David Sariel. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?9b43d6e67ddc7c0855b1478ee4c48c2d" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script>var wechatModal=document.getElementById("WeChatMod"),wechatBtn=document.getElementById("WeChatBtn");wechatBtn.onclick=function(){wechatModal.style.display="block"},window.onclick=function(t){t.target==wechatModal&&(wechatModal.style.display="none")};</script> </body> </html>