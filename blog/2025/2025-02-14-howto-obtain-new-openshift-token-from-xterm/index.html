<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <h1 id="how-to-obtain-a-new-token-for-openshift-from-xterm">How to Obtain a New Token for OpenShift from xterm</h1> <p>Suppose your OpenShift login token expired because tokens are, by default, valid for a limited time (e.g., 24 hours). Follow these steps to obtain a new token and continue working with the cluster:</p> <h2 id="steps-to-obtain-a-new-token">Steps to Obtain a New Token</h2> <ol> <li> <p><strong>Install a Text-Based Browser</strong><br> Install <code class="language-plaintext highlighter-rouge">lynx</code>, a command-line browser, to access the token request page:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum <span class="nb">install </span>lynx <span class="nt">-y</span>
</code></pre></div> </div> </li> <li> <p><strong>Access the Token Request Page</strong><br> Use <code class="language-plaintext highlighter-rouge">lynx</code> to navigate to the token request page:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>lynx https://oauth-openshift.apps.ocp.openstack.lab/oauth/token/request
</code></pre></div> </div> </li> <li> <p><strong>Retrieve the **</strong><strong>``</strong><strong>** Password</strong><br> If you are using the default <code class="language-plaintext highlighter-rouge">kubeadmin</code> user, retrieve the password from the installation directory:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~/.kube/kubeadmin-password
</code></pre></div> </div> <p>Use this password to log in as <code class="language-plaintext highlighter-rouge">kubeadmin</code> in the browser interface.</p> </li> <li> <p><strong>Generate a New Token</strong><br> Once logged in, obtain a new token. The login command will look like this:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>oc login <span class="nt">--token</span><span class="o">=</span>sha256~&lt;...&gt; <span class="nt">--server</span><span class="o">=</span>https://api.ocp.openstack.lab:6443
</code></pre></div> </div> </li> <li> <p><strong>Retry Your Command</strong><br> With the new token, re-run the desired command. For example:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>oc <span class="nt">-n</span> openstack <span class="nb">wait </span>openstackcontrolplane controlplane <span class="nt">--for</span> <span class="nv">condition</span><span class="o">=</span>Ready <span class="nt">--timeout</span><span class="o">=</span>60m
</code></pre></div> </div> </li> </ol> <p>By following these steps, you can quickly regain access to your OpenShift cluster and continue your tasks without disruption.</p> </body></html>